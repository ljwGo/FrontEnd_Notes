[toc]

## 具体参考博客,很生动形象
<a>https://www.cnblogs.com/xuanyuan/p/15122294.html</a>

## Https导入
### http的弊端
> http是明文传输的,所以数据被人拦截后是可以查和修改的

### 简单加密
> 通过加密数据可以解决这个问题,但是不但别人看不了,服务端也看不了

### 服务端和客户端协商
> 只要客户端和服务端事先协商好加密的算法就好了,但是怎么协商加密算法呢?
> 直接将要使用的加密算法发送给对方,同样会被拦截,之后加密的数据就不安全了

### 公钥和私钥
> 非对称加密是一样非常好的东西.
> 它的特点是公钥加密,只能私钥解密;私钥加密,只能公钥解密.
> 客户端使用服务端的公钥进行数据加密,服务端用自己的私钥解密.
> 服务端使用客户端的公钥进行数据加密,客户端用自己的私钥解密.
> 那么客户端和服务端的公钥就可以公开给所有人,用于加密数据.然后用各自私钥解密对应数据

### 如何获取对方公钥
> 出现了一个问题,上面的情况是
> 客户带拿到服务端的公钥,服务端拿到客户端的公钥
> 它们如何获取对方的公钥?
> 直接发送给对方吗?那样可能就会被篡改替换了,又回到了上面的问题?只不过是从发送加密算法变为了发送公钥

### 本地保存网站的公钥
> 既然明文发送公钥或者加密算法会被拦截利用.密文发送,服务器又识别不出来.
> 那么解决办法就是不发送
> 在本地保存公钥
> 那么问题,世界上web网站千千万,你能保存所有公钥?

### 仅保存几个权威机构的公钥,用于效验其它公钥是否被篡改
> 既然保存所有公钥是不现实的,通过保存几个公钥能够实现"拥有"所有公钥吗?
> 是可以的,假如你在访问a.com网站.
> a.com网站之前在一个权威机构上注册了自己的网站,
> 权威机构用自己的私钥将它的公钥和域名a.com等信息进行加密(这就是证书).
> a.com将这个加密后的数据发送给你的浏览器
> 浏览器用保存在本地的权威机构的公钥对这个加密数据解密.就能够确认1->你访问的网址是否正确;2->获取到对应网址的公钥
> 你成功获取到对方的公钥了,然会就能用这个公钥加密数据了

## https简单流程
> 1. https依赖于ssl(高版本为TLS,似乎是支持更高版本的证书,毕竟证书加内容,发送时就多很多字节)安全套接字, TLS在传输层之上,在建立TCP连接之后将进行**四次握手**
> 2. 四次握手,建立TCP之后:
> 1)客户端发出请求,数据中包含可支持的加密算法列表以及随机数C(用于后续密钥的产生)
> 2)服务端根据自己支持的加密算法列表和客户端给出的,协商后续加密所使用的算法,同时生成随机数S(同样用于后续密钥的产生),发送自己的证书
> 3)客户端验证证书,通过证书中的公钥,加密利用随机数C和S生成的对称密钥
> 4)服务端验证利用自己的私钥进行解密,发送一次利用对称密钥加密的数据,验证对称加密是否正确
> **自己理解的可能不正确,具体参考<a>https://www.gworg.com/ssl/408.html</a>**
> 3 利用对称密钥进行后续通话

https使用443端口